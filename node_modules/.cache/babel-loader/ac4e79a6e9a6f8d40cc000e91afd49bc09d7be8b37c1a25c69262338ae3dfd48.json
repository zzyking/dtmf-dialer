{"ast":null,"code":"import { AmplitudeEnvelope } from \"../component/envelope/AmplitudeEnvelope.js\";\nimport { Envelope } from \"../component/envelope/Envelope.js\";\nimport { ToneAudioNode } from \"../core/context/ToneAudioNode.js\";\nimport { omitFromObject, optionsFromArguments } from \"../core/util/Defaults.js\";\nimport { readOnly } from \"../core/util/Interface.js\";\nimport { OmniOscillator } from \"../source/oscillator/OmniOscillator.js\";\nimport { Source } from \"../source/Source.js\";\nimport { Monophonic } from \"./Monophonic.js\";\n/**\n * Synth is composed simply of a {@link OmniOscillator} routed through an {@link AmplitudeEnvelope}.\n * ```\n * +----------------+   +-------------------+\n * | OmniOscillator +>--> AmplitudeEnvelope +>--> Output\n * +----------------+   +-------------------+\n * ```\n * @example\n * const synth = new Tone.Synth().toDestination();\n * synth.triggerAttackRelease(\"C4\", \"8n\");\n * @category Instrument\n */\nexport class Synth extends Monophonic {\n  constructor() {\n    const options = optionsFromArguments(Synth.getDefaults(), arguments);\n    super(options);\n    this.name = \"Synth\";\n    this.oscillator = new OmniOscillator(Object.assign({\n      context: this.context,\n      detune: options.detune,\n      onstop: () => this.onsilence(this)\n    }, options.oscillator));\n    this.frequency = this.oscillator.frequency;\n    this.detune = this.oscillator.detune;\n    this.envelope = new AmplitudeEnvelope(Object.assign({\n      context: this.context\n    }, options.envelope));\n    // connect the oscillators to the output\n    this.oscillator.chain(this.envelope, this.output);\n    readOnly(this, [\"oscillator\", \"frequency\", \"detune\", \"envelope\"]);\n  }\n  static getDefaults() {\n    return Object.assign(Monophonic.getDefaults(), {\n      envelope: Object.assign(omitFromObject(Envelope.getDefaults(), Object.keys(ToneAudioNode.getDefaults())), {\n        attack: 0.005,\n        decay: 0.1,\n        release: 1,\n        sustain: 0.3\n      }),\n      oscillator: Object.assign(omitFromObject(OmniOscillator.getDefaults(), [...Object.keys(Source.getDefaults()), \"frequency\", \"detune\"]), {\n        type: \"triangle\"\n      })\n    });\n  }\n  /**\n   * start the attack portion of the envelope\n   * @param time the time the attack should start\n   * @param velocity the velocity of the note (0-1)\n   */\n  _triggerEnvelopeAttack(time, velocity) {\n    // the envelopes\n    this.envelope.triggerAttack(time, velocity);\n    this.oscillator.start(time);\n    // if there is no release portion, stop the oscillator\n    if (this.envelope.sustain === 0) {\n      const computedAttack = this.toSeconds(this.envelope.attack);\n      const computedDecay = this.toSeconds(this.envelope.decay);\n      this.oscillator.stop(time + computedAttack + computedDecay);\n    }\n  }\n  /**\n   * start the release portion of the envelope\n   * @param time the time the release should start\n   */\n  _triggerEnvelopeRelease(time) {\n    this.envelope.triggerRelease(time);\n    this.oscillator.stop(time + this.toSeconds(this.envelope.release));\n  }\n  getLevelAtTime(time) {\n    time = this.toSeconds(time);\n    return this.envelope.getValueAtTime(time);\n  }\n  /**\n   * clean up\n   */\n  dispose() {\n    super.dispose();\n    this.oscillator.dispose();\n    this.envelope.dispose();\n    return this;\n  }\n}","map":{"version":3,"names":["AmplitudeEnvelope","Envelope","ToneAudioNode","omitFromObject","optionsFromArguments","readOnly","OmniOscillator","Source","Monophonic","Synth","constructor","options","getDefaults","arguments","name","oscillator","Object","assign","context","detune","onstop","onsilence","frequency","envelope","chain","output","keys","attack","decay","release","sustain","type","_triggerEnvelopeAttack","time","velocity","triggerAttack","start","computedAttack","toSeconds","computedDecay","stop","_triggerEnvelopeRelease","triggerRelease","getLevelAtTime","getValueAtTime","dispose"],"sources":["/Users/king/Documents/GitHub/dtmf-dialer/node_modules/tone/Tone/instrument/Synth.ts"],"sourcesContent":["import { AmplitudeEnvelope } from \"../component/envelope/AmplitudeEnvelope.js\";\nimport { Envelope, EnvelopeOptions } from \"../component/envelope/Envelope.js\";\nimport {\n\tToneAudioNode,\n\tToneAudioNodeOptions,\n} from \"../core/context/ToneAudioNode.js\";\nimport { NormalRange, Seconds, Time } from \"../core/type/Units.js\";\nimport { omitFromObject, optionsFromArguments } from \"../core/util/Defaults.js\";\nimport { readOnly } from \"../core/util/Interface.js\";\nimport { RecursivePartial } from \"../core/util/Interface.js\";\nimport { Signal } from \"../signal/Signal.js\";\nimport { OmniOscillator } from \"../source/oscillator/OmniOscillator.js\";\nimport {\n\tOmniOscillatorOptions,\n\tOmniOscillatorSynthOptions,\n} from \"../source/oscillator/OscillatorInterface.js\";\nimport { Source } from \"../source/Source.js\";\nimport { Monophonic, MonophonicOptions } from \"./Monophonic.js\";\n\nexport interface SynthOptions extends MonophonicOptions {\n\toscillator: OmniOscillatorSynthOptions;\n\tenvelope: Omit<EnvelopeOptions, keyof ToneAudioNodeOptions>;\n}\n\n/**\n * Synth is composed simply of a {@link OmniOscillator} routed through an {@link AmplitudeEnvelope}.\n * ```\n * +----------------+   +-------------------+\n * | OmniOscillator +>--> AmplitudeEnvelope +>--> Output\n * +----------------+   +-------------------+\n * ```\n * @example\n * const synth = new Tone.Synth().toDestination();\n * synth.triggerAttackRelease(\"C4\", \"8n\");\n * @category Instrument\n */\nexport class Synth<\n\tOptions extends SynthOptions = SynthOptions,\n> extends Monophonic<Options> {\n\treadonly name: string = \"Synth\";\n\n\t/**\n\t * The oscillator.\n\t */\n\treadonly oscillator: OmniOscillator<any>;\n\n\t/**\n\t * The frequency signal\n\t */\n\treadonly frequency: Signal<\"frequency\">;\n\n\t/**\n\t * The detune signal\n\t */\n\treadonly detune: Signal<\"cents\">;\n\n\t/**\n\t * The envelope\n\t */\n\treadonly envelope: AmplitudeEnvelope;\n\n\t/**\n\t * @param options the options available for the synth.\n\t */\n\tconstructor(options?: RecursivePartial<SynthOptions>);\n\tconstructor() {\n\t\tconst options = optionsFromArguments(Synth.getDefaults(), arguments);\n\t\tsuper(options);\n\n\t\tthis.oscillator = new OmniOscillator(\n\t\t\tObject.assign(\n\t\t\t\t{\n\t\t\t\t\tcontext: this.context,\n\t\t\t\t\tdetune: options.detune,\n\t\t\t\t\tonstop: () => this.onsilence(this),\n\t\t\t\t},\n\t\t\t\toptions.oscillator\n\t\t\t)\n\t\t);\n\n\t\tthis.frequency = this.oscillator.frequency;\n\t\tthis.detune = this.oscillator.detune;\n\n\t\tthis.envelope = new AmplitudeEnvelope(\n\t\t\tObject.assign(\n\t\t\t\t{\n\t\t\t\t\tcontext: this.context,\n\t\t\t\t},\n\t\t\t\toptions.envelope\n\t\t\t)\n\t\t);\n\n\t\t// connect the oscillators to the output\n\t\tthis.oscillator.chain(this.envelope, this.output);\n\t\treadOnly(this, [\"oscillator\", \"frequency\", \"detune\", \"envelope\"]);\n\t}\n\n\tstatic getDefaults(): SynthOptions {\n\t\treturn Object.assign(Monophonic.getDefaults(), {\n\t\t\tenvelope: Object.assign(\n\t\t\t\tomitFromObject(\n\t\t\t\t\tEnvelope.getDefaults(),\n\t\t\t\t\tObject.keys(ToneAudioNode.getDefaults())\n\t\t\t\t),\n\t\t\t\t{\n\t\t\t\t\tattack: 0.005,\n\t\t\t\t\tdecay: 0.1,\n\t\t\t\t\trelease: 1,\n\t\t\t\t\tsustain: 0.3,\n\t\t\t\t}\n\t\t\t),\n\t\t\toscillator: Object.assign(\n\t\t\t\tomitFromObject(OmniOscillator.getDefaults(), [\n\t\t\t\t\t...Object.keys(Source.getDefaults()),\n\t\t\t\t\t\"frequency\",\n\t\t\t\t\t\"detune\",\n\t\t\t\t]),\n\t\t\t\t{\n\t\t\t\t\ttype: \"triangle\",\n\t\t\t\t}\n\t\t\t) as OmniOscillatorOptions,\n\t\t});\n\t}\n\n\t/**\n\t * start the attack portion of the envelope\n\t * @param time the time the attack should start\n\t * @param velocity the velocity of the note (0-1)\n\t */\n\tprotected _triggerEnvelopeAttack(time: Seconds, velocity: number): void {\n\t\t// the envelopes\n\t\tthis.envelope.triggerAttack(time, velocity);\n\t\tthis.oscillator.start(time);\n\t\t// if there is no release portion, stop the oscillator\n\t\tif (this.envelope.sustain === 0) {\n\t\t\tconst computedAttack = this.toSeconds(this.envelope.attack);\n\t\t\tconst computedDecay = this.toSeconds(this.envelope.decay);\n\t\t\tthis.oscillator.stop(time + computedAttack + computedDecay);\n\t\t}\n\t}\n\n\t/**\n\t * start the release portion of the envelope\n\t * @param time the time the release should start\n\t */\n\tprotected _triggerEnvelopeRelease(time: Seconds): void {\n\t\tthis.envelope.triggerRelease(time);\n\t\tthis.oscillator.stop(time + this.toSeconds(this.envelope.release));\n\t}\n\n\tgetLevelAtTime(time: Time): NormalRange {\n\t\ttime = this.toSeconds(time);\n\t\treturn this.envelope.getValueAtTime(time);\n\t}\n\n\t/**\n\t * clean up\n\t */\n\tdispose(): this {\n\t\tsuper.dispose();\n\t\tthis.oscillator.dispose();\n\t\tthis.envelope.dispose();\n\t\treturn this;\n\t}\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}